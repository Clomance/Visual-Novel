# Визуальная новелла, написанная на Rust с помощью игрового движка Piston.
## Версия 0.4.3
При участии YokuTM и Masya26

Знаю, что можно было использовать типажи-объекты, обобщить всё по-максимуму и упростить код в разы, но, если бы хотел сделать всё просто, то я бы использовал Java. Поэтому ради "оптимизации" всё так страшно выглядит.

## Редактирование игры

Новеллу можно переделать на свой вкус, заменив все диалоги и текстуры. Ниже будут описаны возможности и правила редактирования.

### Общие настройки

#### Параметры игры (количество страниц и героев)

За начальную настройку игры отвечает файл `./settings/settings.txt`.

Определяемые поля:
 - continue - определяет начинать ли новую игру (true) или загрузить данные сохранения (false), пока не подключено
 - user_name - определяет имя игрока
 - saved_page - страница, на которой остановился пользователь
 - saved_dialogue - место в диалоге, на котором остановился пользователь
 - pages - количество страниц в игре
 - page_wallpapers - количество обоев для страниц в игре
 - characters - количество героев

Записываются в файл в том же порядке, на отдельных строчках.

Пример:
```
false
Оскар
0
0
3
3
1
```

Будьте осторожны при редактировании.

#### Построение и ход игры

За ход игры, а точнее, за последовательность диалогов, обоев и героев отвечает файл `./settings/page_table.txt`.

В нём содеражатся блоки страниц с номерами обоев, диалога и первонажа. Все страницы идут по порядку, сверху вниз.

Формат страничных блоков:

```
[любая информация (в одну строчку)]{
    wallpaper = [номер обоев]
    dialogue = [номер диалога]
    character = [номер персонажа]
}
```


### Диалоги

Диалоги находятся в папке `./text`.


Текст диалогов должен быть записан в кодировке UTF-8, а файлы должны именоваться следующим образом: `dialogue[номер диалога].txt`, все номера диалогов идут по порядку, начиная с нуля.
Пример: `dialogue0.txt`.

##### Формат диалогов:
В начале идёт заголовок:
```
{
    [полное имя] = [краткое имя]
    Оскар = О
}
```
Далее идёт сам диалог:
```
[краткое имя] - [однострочный диалог]
О - Какая хорошая сегодня погода.
```

Для вставки имени игрока используются `{}`:
```
О - Какая хорошая сегодня погода.
O - Да, {}?
{} - Согласен с вами, Оскар.
```


Также по ходу диалога можно переопределять заголовок.

### Изображения

Все изображения находятся в папке `./images`.

#### Обои и задние планы

Обои и задние планы находятся в папке `./images/wallpapers`.

Обои главного меню и конечная заствка игры здесь же. Пути `./images/wallpapers/main_menu_wallpaper.jpg` и `./images/wallpapers/ending_wallpaper.jpg` соответственно.

Всё остальное так же должно быть в формате `jpg`, а именоваться следующим образом: `wallpaper[номер заднего плана].jpg`, все номера идут по порядку, начиная с нуля.
Пример: `wallpaper0.jpg`.

#### Парсонажи

Текстуры персонажей находятся в папке `./images/characters`.

Все текстуры для героев должны быть в формате `png` и именоваться следующим образом: `character[номер персонажа].png`, все номера идут по порядку, начиная с нуля.
Пример: `character0.png`.

#### Остальное

Путь текстуры для окна с диалогими - `./images/dialog_box.png`.
